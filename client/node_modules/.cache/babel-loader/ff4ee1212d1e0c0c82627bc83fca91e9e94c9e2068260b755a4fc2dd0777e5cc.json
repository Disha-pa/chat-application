{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\parma\\\\OneDrive\\\\Desktop\\\\Chat Application\\\\client\\\\src\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport Picker from '@emoji-mart/react';\nimport data from '@emoji-mart/data';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:5000');\nfunction getRandomColor() {\n  const colors = ['#25D366', '#34B7F1', '#FFEB3B', '#FF5722', '#9C27B0'];\n  return colors[Math.floor(Math.random() * colors.length)];\n}\nconst STICKERS = ['https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif', 'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif', 'https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif', 'https://media.giphy.com/media/1BcfiGlOGXzQk/giphy.gif', 'https://media.giphy.com/media/13CoXDiaCcCoyk/giphy.gif'];\nfunction Chat({\n  user,\n  onLogout\n}) {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [groups, setGroups] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [showCreateGroup, setShowCreateGroup] = useState(false);\n  const [newGroup, setNewGroup] = useState({\n    name: '',\n    avatar: ''\n  });\n  const messagesEndRef = useRef(null);\n  const [typingUsers, setTypingUsers] = useState([]);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [showEmoji, setShowEmoji] = useState(false);\n  const [showStickers, setShowStickers] = useState(false);\n  const [replyTo, setReplyTo] = useState(null);\n  const [replies, setReplies] = useState({}); // messageId -> array of replies\n  const [chatSearch, setChatSearch] = useState(\"\"); // For filtering users/groups\n  const [messageSearch, setMessageSearch] = useState(\"\"); // For filtering messages\n  const [theme, setTheme] = useState(() => localStorage.getItem('theme') || 'light');\n  useEffect(() => {\n    document.body.className = theme === 'dark' ? 'dark' : '';\n    localStorage.setItem('theme', theme);\n  }, [theme]);\n\n  // Fetch user and group list\n  useEffect(() => {\n    fetch(`/api/users?username=${encodeURIComponent(user.username)}`).then(res => res.json()).then(setUsers);\n    fetch(`/api/groups?username=${encodeURIComponent(user.username)}`).then(res => res.json()).then(setGroups);\n  }, [user.username]);\n\n  // Join own room for private messaging\n  useEffect(() => {\n    socket.emit('join', user.username);\n  }, [user.username]);\n\n  // Join group room when selectedGroup changes\n  useEffect(() => {\n    if (selectedGroup) socket.emit('join-group', selectedGroup.name);\n  }, [selectedGroup]);\n\n  // Fetch private chat history when selectedUser changes\n  useEffect(() => {\n    if (selectedUser) {\n      fetch(`/api/messages/${user.username}/${selectedUser.username}`).then(res => res.json()).then(setMessages);\n    }\n  }, [selectedUser, user.username]);\n\n  // Fetch group chat history when selectedGroup changes\n  useEffect(() => {\n    if (selectedGroup) {\n      fetch(`/api/group-messages/${selectedGroup.name}`).then(res => res.json()).then(setMessages);\n    }\n  }, [selectedGroup]);\n\n  // Request notification permission on mount\n  useEffect(() => {\n    if (window.Notification && Notification.permission === 'default') {\n      Notification.requestPermission();\n    }\n  }, []);\n\n  // Listen for private and group messages (with notification)\n  useEffect(() => {\n    const privateHandler = msg => {\n      if (msg.from === user.username && msg.to === (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username) || msg.from === (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username) && msg.to === user.username) {\n        setMessages(prev => [...prev, msg]);\n      }\n      // Show notification if message is for this user, not from self, and not focused on sender\n      if (msg.to === user.username && msg.from !== user.username && (!selectedUser || selectedUser.username !== msg.from)) {\n        if (window.Notification && Notification.permission === 'granted') {\n          new Notification(`New message from ${msg.from}`, {\n            body: msg.text || '[Sticker]',\n            icon: msg.avatar || undefined\n          });\n        }\n      }\n    };\n    const groupHandler = msg => {\n      if (msg.group === (selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name)) {\n        setMessages(prev => [...prev, msg]);\n      }\n      // Show notification if message is for a group the user is in, not from self, and not focused on group\n      if (msg.group && msg.from !== user.username && (!selectedGroup || selectedGroup.name !== msg.group)) {\n        if (window.Notification && Notification.permission === 'granted') {\n          new Notification(`New message in #${msg.group} from ${msg.from}`, {\n            body: msg.text || '[Sticker]',\n            icon: msg.avatar || undefined\n          });\n        }\n      }\n    };\n    socket.on('private message', privateHandler);\n    socket.on('group message', groupHandler);\n    return () => {\n      socket.off('private message', privateHandler);\n      socket.off('group message', groupHandler);\n    };\n  }, [selectedUser, selectedGroup, user.username]);\n\n  // Typing indicator handlers\n  useEffect(() => {\n    const handleTyping = ({\n      from\n    }) => {\n      setTypingUsers(prev => prev.includes(from) ? prev : [...prev, from]);\n    };\n    const handleStopTyping = ({\n      from\n    }) => {\n      setTypingUsers(prev => prev.filter(u => u !== from));\n    };\n    const handleTypingGroup = ({\n      from,\n      group\n    }) => {\n      if (group === (selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name)) {\n        setTypingUsers(prev => prev.includes(from) ? prev : [...prev, from]);\n      }\n    };\n    const handleStopTypingGroup = ({\n      from,\n      group\n    }) => {\n      if (group === (selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name)) {\n        setTypingUsers(prev => prev.filter(u => u !== from));\n      }\n    };\n    socket.on('typing', handleTyping);\n    socket.on('stop typing', handleStopTyping);\n    socket.on('typing-group', handleTypingGroup);\n    socket.on('stop typing-group', handleStopTypingGroup);\n    return () => {\n      socket.off('typing', handleTyping);\n      socket.off('stop typing', handleStopTyping);\n      socket.off('typing-group', handleTypingGroup);\n      socket.off('stop typing-group', handleStopTypingGroup);\n    };\n  }, [selectedUser, selectedGroup]);\n\n  // Presence: join on mount, listen for updates\n  useEffect(() => {\n    socket.emit('presence', user.username);\n    fetch('/api/online-users').then(res => res.json()).then(setOnlineUsers);\n    const handlePresenceUpdate = users => setOnlineUsers(users);\n    socket.on('presence-update', handlePresenceUpdate);\n    return () => socket.off('presence-update', handlePresenceUpdate);\n  }, [user.username]);\n\n  // Emit read events for private and group chats\n  useEffect(() => {\n    if (selectedUser && messages.length > 0) {\n      socket.emit('read-message', {\n        from: selectedUser.username,\n        to: user.username\n      });\n    }\n    if (selectedGroup && messages.length > 0) {\n      socket.emit('read-group-message', {\n        group: selectedGroup.name,\n        username: user.username\n      });\n    }\n  }, [selectedUser, selectedGroup, messages.length, user.username]);\n\n  // Listen for read receipt updates\n  useEffect(() => {\n    const handleMessageRead = ({\n      _id,\n      by\n    }) => {\n      setMessages(prev => prev.map(m => {\n        var _m$readBy;\n        return m._id === _id && !((_m$readBy = m.readBy) !== null && _m$readBy !== void 0 && _m$readBy.includes(by)) ? {\n          ...m,\n          readBy: [...(m.readBy || []), by]\n        } : m;\n      }));\n    };\n    const handleGroupMessageRead = ({\n      _id,\n      by\n    }) => {\n      setMessages(prev => prev.map(m => {\n        var _m$readBy2;\n        return m._id === _id && !((_m$readBy2 = m.readBy) !== null && _m$readBy2 !== void 0 && _m$readBy2.includes(by)) ? {\n          ...m,\n          readBy: [...(m.readBy || []), by]\n        } : m;\n      }));\n    };\n    socket.on('message-read', handleMessageRead);\n    socket.on('group-message-read', handleGroupMessageRead);\n    return () => {\n      socket.off('message-read', handleMessageRead);\n      socket.off('group-message-read', handleGroupMessageRead);\n    };\n  }, []);\n\n  // Fetch replies for a message\n  const fetchReplies = async messageId => {\n    const res = await fetch(`/api/messages/${messageId}/replies`);\n    const data = await res.json();\n    setReplies(prev => ({\n      ...prev,\n      [messageId]: data\n    }));\n  };\n\n  // Listen for reaction and reply events\n  useEffect(() => {\n    const handleReaction = ({\n      messageId,\n      reactions\n    }) => {\n      setMessages(prev => prev.map(m => m._id === messageId ? {\n        ...m,\n        reactions\n      } : m));\n    };\n    const handleReply = reply => {\n      setReplies(prev => ({\n        ...prev,\n        [reply.replyTo]: [...(prev[reply.replyTo] || []), reply]\n      }));\n    };\n    socket.on('reaction', handleReaction);\n    socket.on('reply', handleReply);\n    return () => {\n      socket.off('reaction', handleReaction);\n      socket.off('reply', handleReply);\n    };\n  }, []);\n\n  // Add reaction to a message\n  const reactToMessage = (messageId, emoji) => {\n    socket.emit('react', {\n      messageId,\n      user: user.username,\n      emoji\n    });\n  };\n  // Remove reaction\n  const unreactToMessage = (messageId, emoji) => {\n    socket.emit('unreact', {\n      messageId,\n      user: user.username,\n      emoji\n    });\n  };\n\n  // Reply to a message\n  const sendReply = e => {\n    e.preventDefault();\n    if (replyTo && message.trim()) {\n      socket.emit('reply', {\n        replyTo: replyTo._id,\n        from: user.username,\n        to: selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username,\n        group: selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name,\n        text: message,\n        color: user.avatar ? undefined : getRandomColor(),\n        avatar: user.avatar,\n        time: new Date().toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      });\n      setMessage('');\n      setReplyTo(null);\n    }\n  };\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const sendMessage = e => {\n    e.preventDefault();\n    if (message.trim() && user && selectedUser) {\n      socket.emit('private message', {\n        from: user.username,\n        to: selectedUser.username,\n        text: message,\n        color: user.avatar ? undefined : getRandomColor(),\n        avatar: user.avatar,\n        time: new Date().toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      });\n      setMessage('');\n    } else if (message.trim() && user && selectedGroup) {\n      socket.emit('group message', {\n        from: user.username,\n        group: selectedGroup.name,\n        text: message,\n        color: user.avatar ? undefined : getRandomColor(),\n        avatar: user.avatar,\n        time: new Date().toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      });\n      setMessage('');\n    }\n  };\n\n  // Emit typing events\n  const typingTimeout = useRef();\n  const handleInputChange = e => {\n    setMessage(e.target.value);\n    if (selectedUser) {\n      socket.emit('typing', {\n        from: user.username,\n        to: selectedUser.username\n      });\n      clearTimeout(typingTimeout.current);\n      typingTimeout.current = setTimeout(() => {\n        socket.emit('stop typing', {\n          from: user.username,\n          to: selectedUser.username\n        });\n      }, 1200);\n    } else if (selectedGroup) {\n      socket.emit('typing-group', {\n        from: user.username,\n        group: selectedGroup.name\n      });\n      clearTimeout(typingTimeout.current);\n      typingTimeout.current = setTimeout(() => {\n        socket.emit('stop typing-group', {\n          from: user.username,\n          group: selectedGroup.name\n        });\n      }, 1200);\n    }\n  };\n  const addEmoji = emoji => {\n    setMessage(msg => msg + emoji.native);\n    setShowEmoji(false);\n  };\n  const addSticker = url => {\n    if (user && (selectedUser || selectedGroup)) {\n      const msg = {\n        from: user.username,\n        to: selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username,\n        group: selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name,\n        text: '',\n        color: user.avatar ? undefined : getRandomColor(),\n        avatar: user.avatar,\n        time: new Date().toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        }),\n        sticker: url\n      };\n      if (selectedUser) {\n        socket.emit('private message', msg);\n      } else if (selectedGroup) {\n        socket.emit('group message', msg);\n      }\n      setShowStickers(false);\n    }\n  };\n  const handleCreateGroup = async e => {\n    e.preventDefault();\n    if (!newGroup.name) return;\n    const res = await fetch('/api/groups', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ...newGroup,\n        admin: user.username\n      })\n    });\n    if (res.ok) {\n      setShowCreateGroup(false);\n      setNewGroup({\n        name: '',\n        avatar: ''\n      });\n      fetch(`/api/groups?username=${encodeURIComponent(user.username)}`).then(res => res.json()).then(setGroups);\n    }\n  };\n  const handleJoinGroup = async group => {\n    await fetch('/api/groups/join', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: group.name,\n        username: user.username\n      })\n    });\n    setSelectedGroup(group);\n    setSelectedUser(null);\n    fetch(`/api/groups?username=${encodeURIComponent(user.username)}`).then(res => res.json()).then(setGroups);\n  };\n\n  // Filtered users and groups\n  const filteredUsers = users.filter(u => u.username.toLowerCase().includes(chatSearch.toLowerCase()));\n  const filteredGroups = groups.filter(g => g.name.toLowerCase().includes(chatSearch.toLowerCase()));\n  // Filtered messages\n  const filteredMessages = messages.filter(msg => {\n    // Check text, sender, and replies\n    const textMatch = (msg.text || \"\").toLowerCase().includes(messageSearch.toLowerCase());\n    const fromMatch = (msg.from || \"\").toLowerCase().includes(messageSearch.toLowerCase());\n    // Check replies if available\n    const replyMatch = (replies[msg._id] || []).some(r => (r.text || \"\").toLowerCase().includes(messageSearch.toLowerCase()));\n    return textMatch || fromMatch || replyMatch;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: theme,\n    style: {\n      maxWidth: 1100,\n      margin: '2rem auto',\n      background: 'var(--bg-main)',\n      borderRadius: 8,\n      boxShadow: '0 2px 8px #0001',\n      display: 'flex',\n      height: '80vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 260,\n        borderRight: '1px solid var(--color-border)',\n        background: 'var(--bg-sidebar)',\n        borderTopLeftRadius: 8,\n        borderBottomLeftRadius: 8,\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 16,\n          borderBottom: '1px solid var(--color-border)',\n          background: 'var(--bg-header)',\n          color: 'var(--color-header)',\n          fontWeight: 'bold',\n          borderTopLeftRadius: 8,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: user.avatar,\n            alt: \"avatar\",\n            style: {\n              width: 36,\n              height: 36,\n              borderRadius: '50%',\n              objectFit: 'cover',\n              border: '2px solid #fff',\n              marginRight: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              width: 36,\n              height: 36,\n              borderRadius: '50%',\n              background: '#25D366',\n              color: '#fff',\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontWeight: 'bold',\n              fontSize: 16,\n              marginRight: 8\n            },\n            children: user.username[0].toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setTheme(t => t === 'light' ? 'dark' : 'light'),\n          style: {\n            background: 'none',\n            border: 'none',\n            color: 'var(--color-header)',\n            fontSize: 22,\n            cursor: 'pointer'\n          },\n          title: \"Toggle dark mode\",\n          children: theme === 'dark' ? '🌙' : '☀️'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 12px',\n          background: 'var(--bg-sidebar)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: chatSearch,\n          onChange: e => setChatSearch(e.target.value),\n          placeholder: \"Search users/groups...\",\n          style: {\n            width: '100%',\n            borderRadius: 16,\n            border: '1px solid var(--color-border)',\n            padding: '6px 12px',\n            fontSize: 14,\n            background: 'var(--color-input)',\n            color: 'var(--color-text)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          borderBottom: '1px solid var(--color-border)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '8px 12px',\n            fontWeight: 'bold',\n            color: 'var(--color-link)'\n          },\n          children: \"Groups\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), filteredGroups.map(g => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => handleJoinGroup(g),\n          style: {\n            cursor: 'pointer',\n            padding: 10,\n            background: (selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name) === g.name ? '#e0f2f1' : 'transparent',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10\n          },\n          children: [g.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: g.avatar,\n            alt: \"avatar\",\n            style: {\n              width: 32,\n              height: 32,\n              borderRadius: '50%',\n              objectFit: 'cover'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              width: 32,\n              height: 32,\n              borderRadius: '50%',\n              background: '#9C27B0',\n              color: '#fff',\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontWeight: 'bold',\n              fontSize: 15\n            },\n            children: g.name[0].toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: g.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this)]\n        }, g.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCreateGroup(true),\n          style: {\n            margin: '10px 12px',\n            background: '#25D366',\n            color: '#fff',\n            border: 'none',\n            borderRadius: 4,\n            padding: '6px 0',\n            fontWeight: 'bold',\n            cursor: 'pointer'\n          },\n          children: \"+ Create Group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '8px 12px',\n            fontWeight: 'bold',\n            color: 'var(--color-link)',\n            marginTop: 16\n          },\n          children: \"Users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), filteredUsers.map(u => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            setSelectedUser(u);\n            setSelectedGroup(null);\n          },\n          style: {\n            cursor: 'pointer',\n            padding: 10,\n            background: (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username) === u.username ? '#e0f2f1' : 'transparent',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 10\n          },\n          children: [u.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: u.avatar,\n            alt: \"avatar\",\n            style: {\n              width: 32,\n              height: 32,\n              borderRadius: '50%',\n              objectFit: 'cover'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              width: 32,\n              height: 32,\n              borderRadius: '50%',\n              background: '#34B7F1',\n              color: '#fff',\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontWeight: 'bold',\n              fontSize: 15\n            },\n            children: u.username[0].toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: u.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), onlineUsers.includes(u.username) && /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              width: 10,\n              height: 10,\n              background: '#25D366',\n              borderRadius: '50%',\n              display: 'inline-block',\n              marginLeft: 6,\n              border: '1.5px solid #fff'\n            },\n            title: \"Online\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 17\n          }, this)]\n        }, u.username, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onLogout,\n        style: {\n          margin: 16,\n          background: '#fff',\n          color: 'var(--color-link)',\n          border: '1px solid var(--color-link)',\n          borderRadius: 4,\n          padding: '6px 0',\n          fontWeight: 'bold',\n          cursor: 'pointer'\n        },\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'var(--bg-header)',\n          color: 'var(--color-header)',\n          padding: '1rem',\n          borderTopRightRadius: 8,\n          fontWeight: 'bold',\n          fontSize: 20,\n          minHeight: 60,\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: selectedGroup ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [selectedGroup.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: selectedGroup.avatar,\n            alt: \"avatar\",\n            style: {\n              width: 36,\n              height: 36,\n              borderRadius: '50%',\n              objectFit: 'cover',\n              border: '2px solid #fff',\n              marginRight: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              width: 36,\n              height: 36,\n              borderRadius: '50%',\n              background: '#9C27B0',\n              color: '#fff',\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontWeight: 'bold',\n              fontSize: 16,\n              marginRight: 8\n            },\n            children: selectedGroup.name[0].toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 17\n          }, this), selectedGroup.name]\n        }, void 0, true) : selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [selectedUser.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: selectedUser.avatar,\n            alt: \"avatar\",\n            style: {\n              width: 36,\n              height: 36,\n              borderRadius: '50%',\n              objectFit: 'cover',\n              border: '2px solid #fff',\n              marginRight: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              width: 36,\n              height: 36,\n              borderRadius: '50%',\n              background: '#34B7F1',\n              color: '#fff',\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontWeight: 'bold',\n              fontSize: 16,\n              marginRight: 8\n            },\n            children: selectedUser.username[0].toUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 17\n          }, this), selectedUser.username]\n        }, void 0, true) : 'Select a user or group to chat'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), (selectedGroup || selectedUser) && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 16px',\n          background: 'var(--bg-chat)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: messageSearch,\n          onChange: e => setMessageSearch(e.target.value),\n          placeholder: \"Search messages...\",\n          style: {\n            width: '100%',\n            borderRadius: 16,\n            border: '1px solid var(--color-border)',\n            padding: '6px 12px',\n            fontSize: 14,\n            background: 'var(--color-input)',\n            color: 'var(--color-text)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: 16,\n          background: 'var(--bg-chat)'\n        },\n        children: [selectedGroup || selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [filteredMessages.map((msg, idx) => {\n            var _replies$msg$_id, _msg$readBy;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                flexDirection: msg.from === user.username ? 'row-reverse' : 'row',\n                alignItems: 'flex-end',\n                marginBottom: 10\n              },\n              children: [msg.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: msg.avatar,\n                alt: \"avatar\",\n                style: {\n                  width: 36,\n                  height: 36,\n                  borderRadius: '50%',\n                  objectFit: 'cover',\n                  margin: '0 8px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: 36,\n                  height: 36,\n                  borderRadius: '50%',\n                  background: msg.color || '#25D366',\n                  color: '#fff',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontWeight: 'bold',\n                  fontSize: 16,\n                  margin: '0 8px'\n                },\n                children: msg.from ? msg.from[0].toUpperCase() : '?'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  maxWidth: '70%',\n                  background: msg.from === user.username ? 'var(--bg-message-own)' : 'var(--bg-message-other)',\n                  borderRadius: 8,\n                  padding: '8px 12px',\n                  boxShadow: '0 1px 2px #0001',\n                  position: 'relative',\n                  color: 'var(--color-text)'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 'bold',\n                    fontSize: 13,\n                    color: 'var(--color-link)'\n                  },\n                  children: msg.from || 'Unknown'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 21\n                }, this), msg.replyTo && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 12,\n                    color: 'var(--color-typing)',\n                    borderLeft: '2px solid #25D366',\n                    paddingLeft: 8,\n                    marginBottom: 4\n                  },\n                  children: \"Replying to message\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 23\n                }, this), msg.sticker ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: msg.sticker,\n                  alt: \"sticker\",\n                  style: {\n                    maxWidth: 120,\n                    maxHeight: 120,\n                    borderRadius: 8,\n                    margin: '8px 0'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 15\n                  },\n                  children: msg.text || msg\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4,\n                    marginTop: 4\n                  },\n                  children: [['👍', '😂', '❤️', '😮', '😢', '😡'].map(emoji => {\n                    var _msg$reactions, _msg$reactions2;\n                    const count = ((_msg$reactions = msg.reactions) === null || _msg$reactions === void 0 ? void 0 : _msg$reactions.filter(r => r.emoji === emoji).length) || 0;\n                    const reacted = (_msg$reactions2 = msg.reactions) === null || _msg$reactions2 === void 0 ? void 0 : _msg$reactions2.some(r => r.emoji === emoji && r.user === user.username);\n                    return /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        cursor: 'pointer',\n                        fontSize: 18,\n                        background: reacted ? '#e0f2f1' : 'var(--color-input)',\n                        borderRadius: 6,\n                        padding: '2px 6px',\n                        border: reacted ? '1.5px solid #25D366' : '1.5px solid var(--color-border)'\n                      },\n                      onClick: () => reacted ? unreactToMessage(msg._id, emoji) : reactToMessage(msg._id, emoji),\n                      title: reacted ? 'Remove reaction' : 'React',\n                      children: [emoji, \" \", count > 0 && count]\n                    }, emoji, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 488,\n                      columnNumber: 27\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      setReplyTo(msg);\n                    },\n                    style: {\n                      marginLeft: 8,\n                      background: 'none',\n                      border: 'none',\n                      color: 'var(--color-link)',\n                      cursor: 'pointer',\n                      fontSize: 14\n                    },\n                    children: \"\\u21A9\\uFE0F Reply\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => fetchReplies(msg._id),\n                    style: {\n                      marginLeft: 4,\n                      background: 'none',\n                      border: 'none',\n                      color: 'var(--color-typing)',\n                      cursor: 'pointer',\n                      fontSize: 14\n                    },\n                    children: [\"\\uD83D\\uDCAC \", ((_replies$msg$_id = replies[msg._id]) === null || _replies$msg$_id === void 0 ? void 0 : _replies$msg$_id.length) || 0]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 501,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 21\n                }, this), replies[msg._id] && replies[msg._id].length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 6,\n                    paddingLeft: 12,\n                    borderLeft: '2px solid var(--color-border)'\n                  },\n                  children: replies[msg._id].map((r, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: 14,\n                      marginBottom: 2\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        color: 'var(--color-link)',\n                        fontWeight: 'bold'\n                      },\n                      children: [r.from, \":\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 508,\n                      columnNumber: 29\n                    }, this), \" \", r.text]\n                  }, r._id || i, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 11,\n                    color: 'var(--color-typing)',\n                    textAlign: 'right',\n                    marginTop: 2,\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4\n                  },\n                  children: [msg.time || '', msg.from === user.username && (selectedUser || selectedGroup) && (selectedUser ? (_msg$readBy = msg.readBy) !== null && _msg$readBy !== void 0 && _msg$readBy.includes(selectedUser.username) ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    title: \"Read\",\n                    style: {\n                      color: '#25D366',\n                      fontSize: 16,\n                      marginLeft: 4\n                    },\n                    children: \"\\u2713\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 519,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    title: \"Delivered\",\n                    style: {\n                      color: 'var(--color-typing)',\n                      fontSize: 16,\n                      marginLeft: 4\n                    },\n                    children: \"\\u2713\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 29\n                  }, this) : selectedGroup ? msg.readBy && selectedGroup.members && msg.readBy.length === selectedGroup.members.length ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    title: \"Read by all\",\n                    style: {\n                      color: '#25D366',\n                      fontSize: 16,\n                      marginLeft: 4\n                    },\n                    children: \"\\u2713\\u2713\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    title: \"Delivered to group\",\n                    style: {\n                      color: 'var(--color-typing)',\n                      fontSize: 16,\n                      marginLeft: 4\n                    },\n                    children: \"\\u2713\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 527,\n                    columnNumber: 29\n                  }, this) : null)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 19\n              }, this)]\n            }, msg._id || idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this);\n          }), typingUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: 'var(--color-typing)',\n              fontStyle: 'italic',\n              margin: '8px 0 0 8px'\n            },\n            children: typingUsers.length === 1 ? `${typingUsers[0]} is typing...` : `${typingUsers.join(', ')} are typing...`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'var(--color-typing)',\n            textAlign: 'center',\n            marginTop: 40\n          },\n          children: \"Select a user or group to start chatting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), (selectedUser || selectedGroup) && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: sendMessage,\n        style: {\n          display: 'flex',\n          padding: 12,\n          background: 'var(--color-input)',\n          borderBottomRightRadius: 8,\n          alignItems: 'center',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setShowEmoji(e => !e),\n          style: {\n            background: 'none',\n            border: 'none',\n            fontSize: 22,\n            marginRight: 6,\n            cursor: 'pointer',\n            color: 'var(--color-link)'\n          },\n          title: \"Emoji\",\n          children: \"\\uD83D\\uDE0A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setShowStickers(e => !e),\n          style: {\n            background: 'none',\n            border: 'none',\n            fontSize: 22,\n            marginRight: 6,\n            cursor: 'pointer',\n            color: 'var(--color-link)'\n          },\n          title: \"Stickers/GIFs\",\n          children: \"\\uD83D\\uDDBC\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: message,\n          onChange: handleInputChange,\n          placeholder: selectedGroup ? `Message #${selectedGroup.name}` : `Message @${selectedUser.username}`,\n          style: {\n            flex: 1,\n            borderRadius: 20,\n            border: '1px solid var(--color-border)',\n            padding: '10px 16px',\n            marginRight: 8,\n            background: 'var(--color-input)',\n            color: 'var(--color-text)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            background: '#25D366',\n            color: '#fff',\n            border: 'none',\n            borderRadius: 20,\n            padding: '0 20px',\n            fontWeight: 'bold',\n            fontSize: 16\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 13\n        }, this), showEmoji && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            bottom: 60,\n            left: 0,\n            zIndex: 10\n          },\n          children: /*#__PURE__*/_jsxDEV(Picker, {\n            data: data,\n            onEmojiSelect: addEmoji,\n            theme: theme\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 15\n        }, this), showStickers && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            bottom: 60,\n            left: 50,\n            zIndex: 10,\n            background: 'var(--bg-main)',\n            borderRadius: 8,\n            boxShadow: '0 2px 8px #0002',\n            padding: 8,\n            display: 'flex',\n            gap: 8\n          },\n          children: STICKERS.map(url => /*#__PURE__*/_jsxDEV(\"img\", {\n            src: url,\n            alt: \"sticker\",\n            style: {\n              width: 48,\n              height: 48,\n              borderRadius: 6,\n              cursor: 'pointer'\n            },\n            onClick: () => addSticker(url)\n          }, url, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 11\n      }, this), replyTo && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: sendReply,\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          background: 'var(--color-input)',\n          borderTop: '1px solid var(--color-border)',\n          padding: 8,\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginRight: 8,\n            color: 'var(--color-link)',\n            fontWeight: 'bold'\n          },\n          children: [\"Replying to \", replyTo.from, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: message,\n          onChange: handleInputChange,\n          placeholder: \"Type your reply...\",\n          style: {\n            flex: 1,\n            borderRadius: 20,\n            border: '1px solid var(--color-border)',\n            padding: '8px 14px',\n            marginRight: 8,\n            background: 'var(--color-input)',\n            color: 'var(--color-text)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            background: '#25D366',\n            color: '#fff',\n            border: 'none',\n            borderRadius: 20,\n            padding: '0 16px',\n            fontWeight: 'bold',\n            fontSize: 15\n          },\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setReplyTo(null),\n          style: {\n            background: 'none',\n            border: 'none',\n            color: 'var(--color-typing)',\n            fontSize: 18,\n            marginLeft: 6,\n            cursor: 'pointer'\n          },\n          children: \"\\u2716\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 11\n      }, this), showCreateGroup && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: '100vw',\n          height: '100vh',\n          background: '#0008',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        },\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleCreateGroup,\n          style: {\n            background: 'var(--bg-main)',\n            padding: 32,\n            borderRadius: 8,\n            minWidth: 320,\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              margin: 0,\n              color: 'var(--color-link)'\n            },\n            children: \"Create Group\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newGroup.name,\n            onChange: e => setNewGroup(g => ({\n              ...g,\n              name: e.target.value\n            })),\n            placeholder: \"Group name\",\n            required: true,\n            style: {\n              padding: 10,\n              borderRadius: 4,\n              border: '1px solid var(--color-border)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newGroup.avatar,\n            onChange: e => setNewGroup(g => ({\n              ...g,\n              avatar: e.target.value\n            })),\n            placeholder: \"Avatar URL (optional)\",\n            style: {\n              padding: 10,\n              borderRadius: 4,\n              border: '1px solid var(--color-border)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              style: {\n                background: '#25D366',\n                color: '#fff',\n                border: 'none',\n                borderRadius: 4,\n                padding: 10,\n                fontWeight: 'bold',\n                flex: 1\n              },\n              children: \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setShowCreateGroup(false),\n              style: {\n                background: 'var(--color-input)',\n                color: 'var(--color-text)',\n                border: 'none',\n                borderRadius: 4,\n                padding: 10,\n                fontWeight: 'bold',\n                flex: 1\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"GSBYEXYujv6MGCiM+KL1VJp/3i0=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useEffect","useState","useRef","io","Picker","data","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","getRandomColor","colors","Math","floor","random","length","STICKERS","Chat","user","onLogout","_s","users","setUsers","groups","setGroups","selectedUser","setSelectedUser","selectedGroup","setSelectedGroup","message","setMessage","messages","setMessages","showCreateGroup","setShowCreateGroup","newGroup","setNewGroup","name","avatar","messagesEndRef","typingUsers","setTypingUsers","onlineUsers","setOnlineUsers","showEmoji","setShowEmoji","showStickers","setShowStickers","replyTo","setReplyTo","replies","setReplies","chatSearch","setChatSearch","messageSearch","setMessageSearch","theme","setTheme","localStorage","getItem","document","body","className","setItem","fetch","encodeURIComponent","username","then","res","json","emit","window","Notification","permission","requestPermission","privateHandler","msg","from","to","prev","text","icon","undefined","groupHandler","group","on","off","handleTyping","includes","handleStopTyping","filter","u","handleTypingGroup","handleStopTypingGroup","handlePresenceUpdate","handleMessageRead","_id","by","map","m","_m$readBy","readBy","handleGroupMessageRead","_m$readBy2","fetchReplies","messageId","handleReaction","reactions","handleReply","reply","reactToMessage","emoji","unreactToMessage","sendReply","e","preventDefault","trim","color","time","Date","toLocaleTimeString","hour","minute","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","typingTimeout","handleInputChange","target","value","clearTimeout","setTimeout","addEmoji","native","addSticker","url","sticker","handleCreateGroup","method","headers","JSON","stringify","admin","ok","handleJoinGroup","filteredUsers","toLowerCase","filteredGroups","g","filteredMessages","textMatch","fromMatch","replyMatch","some","r","style","maxWidth","margin","background","borderRadius","boxShadow","display","height","children","width","borderRight","borderTopLeftRadius","borderBottomLeftRadius","flexDirection","padding","borderBottom","fontWeight","alignItems","justifyContent","src","alt","objectFit","border","marginRight","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","toUpperCase","onClick","t","cursor","title","type","onChange","placeholder","flex","overflowY","gap","marginTop","marginLeft","borderTopRightRadius","minHeight","idx","_replies$msg$_id","_msg$readBy","marginBottom","position","borderLeft","paddingLeft","maxHeight","_msg$reactions","_msg$reactions2","count","reacted","i","textAlign","members","fontStyle","join","ref","onSubmit","borderBottomRightRadius","bottom","left","zIndex","onEmojiSelect","borderTop","top","minWidth","required","_c","$RefreshReg$"],"sources":["C:/Users/parma/OneDrive/Desktop/Chat Application/client/src/Chat.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport Picker from '@emoji-mart/react';\r\nimport data from '@emoji-mart/data';\r\n\r\nconst socket = io('http://localhost:5000');\r\n\r\nfunction getRandomColor() {\r\n  const colors = ['#25D366', '#34B7F1', '#FFEB3B', '#FF5722', '#9C27B0'];\r\n  return colors[Math.floor(Math.random() * colors.length)];\r\n}\r\n\r\nconst STICKERS = [\r\n  'https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif',\r\n  'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif',\r\n  'https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif',\r\n  'https://media.giphy.com/media/1BcfiGlOGXzQk/giphy.gif',\r\n  'https://media.giphy.com/media/13CoXDiaCcCoyk/giphy.gif',\r\n];\r\n\r\nfunction Chat({ user, onLogout }) {\r\n  const [users, setUsers] = useState([]);\r\n  const [groups, setGroups] = useState([]);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [selectedGroup, setSelectedGroup] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [showCreateGroup, setShowCreateGroup] = useState(false);\r\n  const [newGroup, setNewGroup] = useState({ name: '', avatar: '' });\r\n  const messagesEndRef = useRef(null);\r\n  const [typingUsers, setTypingUsers] = useState([]);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [showStickers, setShowStickers] = useState(false);\r\n  const [replyTo, setReplyTo] = useState(null);\r\n  const [replies, setReplies] = useState({}); // messageId -> array of replies\r\n  const [chatSearch, setChatSearch] = useState(\"\"); // For filtering users/groups\r\n  const [messageSearch, setMessageSearch] = useState(\"\"); // For filtering messages\r\n  const [theme, setTheme] = useState(() => localStorage.getItem('theme') || 'light');\r\n  useEffect(() => { document.body.className = theme === 'dark' ? 'dark' : ''; localStorage.setItem('theme', theme); }, [theme]);\r\n\r\n  // Fetch user and group list\r\n  useEffect(() => {\r\n    fetch(`/api/users?username=${encodeURIComponent(user.username)}`)\r\n      .then(res => res.json())\r\n      .then(setUsers);\r\n    fetch(`/api/groups?username=${encodeURIComponent(user.username)}`)\r\n      .then(res => res.json())\r\n      .then(setGroups);\r\n  }, [user.username]);\r\n\r\n  // Join own room for private messaging\r\n  useEffect(() => {\r\n    socket.emit('join', user.username);\r\n  }, [user.username]);\r\n\r\n  // Join group room when selectedGroup changes\r\n  useEffect(() => {\r\n    if (selectedGroup) socket.emit('join-group', selectedGroup.name);\r\n  }, [selectedGroup]);\r\n\r\n  // Fetch private chat history when selectedUser changes\r\n  useEffect(() => {\r\n    if (selectedUser) {\r\n      fetch(`/api/messages/${user.username}/${selectedUser.username}`)\r\n        .then(res => res.json())\r\n        .then(setMessages);\r\n    }\r\n  }, [selectedUser, user.username]);\r\n\r\n  // Fetch group chat history when selectedGroup changes\r\n  useEffect(() => {\r\n    if (selectedGroup) {\r\n      fetch(`/api/group-messages/${selectedGroup.name}`)\r\n        .then(res => res.json())\r\n        .then(setMessages);\r\n    }\r\n  }, [selectedGroup]);\r\n\r\n  // Request notification permission on mount\r\n  useEffect(() => {\r\n    if (window.Notification && Notification.permission === 'default') {\r\n      Notification.requestPermission();\r\n    }\r\n  }, []);\r\n\r\n  // Listen for private and group messages (with notification)\r\n  useEffect(() => {\r\n    const privateHandler = (msg) => {\r\n      if (\r\n        (msg.from === user.username && msg.to === selectedUser?.username) ||\r\n        (msg.from === selectedUser?.username && msg.to === user.username)\r\n      ) {\r\n        setMessages((prev) => [...prev, msg]);\r\n      }\r\n      // Show notification if message is for this user, not from self, and not focused on sender\r\n      if (\r\n        msg.to === user.username && msg.from !== user.username &&\r\n        (!selectedUser || selectedUser.username !== msg.from)\r\n      ) {\r\n        if (window.Notification && Notification.permission === 'granted') {\r\n          new Notification(`New message from ${msg.from}`, {\r\n            body: msg.text || '[Sticker]',\r\n            icon: msg.avatar || undefined\r\n          });\r\n        }\r\n      }\r\n    };\r\n    const groupHandler = (msg) => {\r\n      if (msg.group === selectedGroup?.name) {\r\n        setMessages((prev) => [...prev, msg]);\r\n      }\r\n      // Show notification if message is for a group the user is in, not from self, and not focused on group\r\n      if (\r\n        msg.group && msg.from !== user.username &&\r\n        (!selectedGroup || selectedGroup.name !== msg.group)\r\n      ) {\r\n        if (window.Notification && Notification.permission === 'granted') {\r\n          new Notification(`New message in #${msg.group} from ${msg.from}`, {\r\n            body: msg.text || '[Sticker]',\r\n            icon: msg.avatar || undefined\r\n          });\r\n        }\r\n      }\r\n    };\r\n    socket.on('private message', privateHandler);\r\n    socket.on('group message', groupHandler);\r\n    return () => {\r\n      socket.off('private message', privateHandler);\r\n      socket.off('group message', groupHandler);\r\n    };\r\n  }, [selectedUser, selectedGroup, user.username]);\r\n\r\n  // Typing indicator handlers\r\n  useEffect(() => {\r\n    const handleTyping = ({ from }) => {\r\n      setTypingUsers((prev) => prev.includes(from) ? prev : [...prev, from]);\r\n    };\r\n    const handleStopTyping = ({ from }) => {\r\n      setTypingUsers((prev) => prev.filter(u => u !== from));\r\n    };\r\n    const handleTypingGroup = ({ from, group }) => {\r\n      if (group === selectedGroup?.name) {\r\n        setTypingUsers((prev) => prev.includes(from) ? prev : [...prev, from]);\r\n      }\r\n    };\r\n    const handleStopTypingGroup = ({ from, group }) => {\r\n      if (group === selectedGroup?.name) {\r\n        setTypingUsers((prev) => prev.filter(u => u !== from));\r\n      }\r\n    };\r\n    socket.on('typing', handleTyping);\r\n    socket.on('stop typing', handleStopTyping);\r\n    socket.on('typing-group', handleTypingGroup);\r\n    socket.on('stop typing-group', handleStopTypingGroup);\r\n    return () => {\r\n      socket.off('typing', handleTyping);\r\n      socket.off('stop typing', handleStopTyping);\r\n      socket.off('typing-group', handleTypingGroup);\r\n      socket.off('stop typing-group', handleStopTypingGroup);\r\n    };\r\n  }, [selectedUser, selectedGroup]);\r\n\r\n  // Presence: join on mount, listen for updates\r\n  useEffect(() => {\r\n    socket.emit('presence', user.username);\r\n    fetch('/api/online-users').then(res => res.json()).then(setOnlineUsers);\r\n    const handlePresenceUpdate = (users) => setOnlineUsers(users);\r\n    socket.on('presence-update', handlePresenceUpdate);\r\n    return () => socket.off('presence-update', handlePresenceUpdate);\r\n  }, [user.username]);\r\n\r\n  // Emit read events for private and group chats\r\n  useEffect(() => {\r\n    if (selectedUser && messages.length > 0) {\r\n      socket.emit('read-message', { from: selectedUser.username, to: user.username });\r\n    }\r\n    if (selectedGroup && messages.length > 0) {\r\n      socket.emit('read-group-message', { group: selectedGroup.name, username: user.username });\r\n    }\r\n  }, [selectedUser, selectedGroup, messages.length, user.username]);\r\n\r\n  // Listen for read receipt updates\r\n  useEffect(() => {\r\n    const handleMessageRead = ({ _id, by }) => {\r\n      setMessages((prev) => prev.map(m => m._id === _id && !m.readBy?.includes(by) ? { ...m, readBy: [...(m.readBy || []), by] } : m));\r\n    };\r\n    const handleGroupMessageRead = ({ _id, by }) => {\r\n      setMessages((prev) => prev.map(m => m._id === _id && !m.readBy?.includes(by) ? { ...m, readBy: [...(m.readBy || []), by] } : m));\r\n    };\r\n    socket.on('message-read', handleMessageRead);\r\n    socket.on('group-message-read', handleGroupMessageRead);\r\n    return () => {\r\n      socket.off('message-read', handleMessageRead);\r\n      socket.off('group-message-read', handleGroupMessageRead);\r\n    };\r\n  }, []);\r\n\r\n  // Fetch replies for a message\r\n  const fetchReplies = async (messageId) => {\r\n    const res = await fetch(`/api/messages/${messageId}/replies`);\r\n    const data = await res.json();\r\n    setReplies((prev) => ({ ...prev, [messageId]: data }));\r\n  };\r\n\r\n  // Listen for reaction and reply events\r\n  useEffect(() => {\r\n    const handleReaction = ({ messageId, reactions }) => {\r\n      setMessages((prev) => prev.map(m => m._id === messageId ? { ...m, reactions } : m));\r\n    };\r\n    const handleReply = (reply) => {\r\n      setReplies((prev) => ({ ...prev, [reply.replyTo]: [...(prev[reply.replyTo] || []), reply] }));\r\n    };\r\n    socket.on('reaction', handleReaction);\r\n    socket.on('reply', handleReply);\r\n    return () => {\r\n      socket.off('reaction', handleReaction);\r\n      socket.off('reply', handleReply);\r\n    };\r\n  }, []);\r\n\r\n  // Add reaction to a message\r\n  const reactToMessage = (messageId, emoji) => {\r\n    socket.emit('react', { messageId, user: user.username, emoji });\r\n  };\r\n  // Remove reaction\r\n  const unreactToMessage = (messageId, emoji) => {\r\n    socket.emit('unreact', { messageId, user: user.username, emoji });\r\n  };\r\n\r\n  // Reply to a message\r\n  const sendReply = (e) => {\r\n    e.preventDefault();\r\n    if (replyTo && message.trim()) {\r\n      socket.emit('reply', {\r\n        replyTo: replyTo._id,\r\n        from: user.username,\r\n        to: selectedUser?.username,\r\n        group: selectedGroup?.name,\r\n        text: message,\r\n        color: user.avatar ? undefined : getRandomColor(),\r\n        avatar: user.avatar,\r\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n      });\r\n      setMessage('');\r\n      setReplyTo(null);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    if (message.trim() && user && selectedUser) {\r\n      socket.emit('private message', {\r\n        from: user.username,\r\n        to: selectedUser.username,\r\n        text: message,\r\n        color: user.avatar ? undefined : getRandomColor(),\r\n        avatar: user.avatar,\r\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n      });\r\n      setMessage('');\r\n    } else if (message.trim() && user && selectedGroup) {\r\n      socket.emit('group message', {\r\n        from: user.username,\r\n        group: selectedGroup.name,\r\n        text: message,\r\n        color: user.avatar ? undefined : getRandomColor(),\r\n        avatar: user.avatar,\r\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n      });\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  // Emit typing events\r\n  const typingTimeout = useRef();\r\n  const handleInputChange = (e) => {\r\n    setMessage(e.target.value);\r\n    if (selectedUser) {\r\n      socket.emit('typing', { from: user.username, to: selectedUser.username });\r\n      clearTimeout(typingTimeout.current);\r\n      typingTimeout.current = setTimeout(() => {\r\n        socket.emit('stop typing', { from: user.username, to: selectedUser.username });\r\n      }, 1200);\r\n    } else if (selectedGroup) {\r\n      socket.emit('typing-group', { from: user.username, group: selectedGroup.name });\r\n      clearTimeout(typingTimeout.current);\r\n      typingTimeout.current = setTimeout(() => {\r\n        socket.emit('stop typing-group', { from: user.username, group: selectedGroup.name });\r\n      }, 1200);\r\n    }\r\n  };\r\n\r\n  const addEmoji = (emoji) => {\r\n    setMessage((msg) => msg + emoji.native);\r\n    setShowEmoji(false);\r\n  };\r\n\r\n  const addSticker = (url) => {\r\n    if (user && (selectedUser || selectedGroup)) {\r\n      const msg = {\r\n        from: user.username,\r\n        to: selectedUser?.username,\r\n        group: selectedGroup?.name,\r\n        text: '',\r\n        color: user.avatar ? undefined : getRandomColor(),\r\n        avatar: user.avatar,\r\n        time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\r\n        sticker: url,\r\n      };\r\n      if (selectedUser) {\r\n        socket.emit('private message', msg);\r\n      } else if (selectedGroup) {\r\n        socket.emit('group message', msg);\r\n      }\r\n      setShowStickers(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateGroup = async (e) => {\r\n    e.preventDefault();\r\n    if (!newGroup.name) return;\r\n    const res = await fetch('/api/groups', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ ...newGroup, admin: user.username })\r\n    });\r\n    if (res.ok) {\r\n      setShowCreateGroup(false);\r\n      setNewGroup({ name: '', avatar: '' });\r\n      fetch(`/api/groups?username=${encodeURIComponent(user.username)}`)\r\n        .then(res => res.json())\r\n        .then(setGroups);\r\n    }\r\n  };\r\n\r\n  const handleJoinGroup = async (group) => {\r\n    await fetch('/api/groups/join', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ name: group.name, username: user.username })\r\n    });\r\n    setSelectedGroup(group);\r\n    setSelectedUser(null);\r\n    fetch(`/api/groups?username=${encodeURIComponent(user.username)}`)\r\n      .then(res => res.json())\r\n      .then(setGroups);\r\n  };\r\n\r\n  // Filtered users and groups\r\n  const filteredUsers = users.filter(u => u.username.toLowerCase().includes(chatSearch.toLowerCase()));\r\n  const filteredGroups = groups.filter(g => g.name.toLowerCase().includes(chatSearch.toLowerCase()));\r\n  // Filtered messages\r\n  const filteredMessages = messages.filter(msg => {\r\n    // Check text, sender, and replies\r\n    const textMatch = (msg.text || \"\").toLowerCase().includes(messageSearch.toLowerCase());\r\n    const fromMatch = (msg.from || \"\").toLowerCase().includes(messageSearch.toLowerCase());\r\n    // Check replies if available\r\n    const replyMatch = (replies[msg._id] || []).some(r => (r.text || \"\").toLowerCase().includes(messageSearch.toLowerCase()));\r\n    return textMatch || fromMatch || replyMatch;\r\n  });\r\n\r\n  return (\r\n    <div className={theme} style={{ maxWidth: 1100, margin: '2rem auto', background: 'var(--bg-main)', borderRadius: 8, boxShadow: '0 2px 8px #0001', display: 'flex', height: '80vh' }}>\r\n      {/* Sidebar: User & Group List */}\r\n      <div style={{ width: 260, borderRight: '1px solid var(--color-border)', background: 'var(--bg-sidebar)', borderTopLeftRadius: 8, borderBottomLeftRadius: 8, display: 'flex', flexDirection: 'column' }}>\r\n        <div style={{ padding: 16, borderBottom: '1px solid var(--color-border)', background: 'var(--bg-header)', color: 'var(--color-header)', fontWeight: 'bold', borderTopLeftRadius: 8, display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <span style={{ display: 'flex', alignItems: 'center' }}>\r\n            {user.avatar ? (\r\n              <img src={user.avatar} alt=\"avatar\" style={{ width: 36, height: 36, borderRadius: '50%', objectFit: 'cover', border: '2px solid #fff', marginRight: 8 }} />\r\n            ) : (\r\n              <span style={{ width: 36, height: 36, borderRadius: '50%', background: '#25D366', color: '#fff', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold', fontSize: 16, marginRight: 8 }}>{user.username[0].toUpperCase()}</span>\r\n            )}\r\n            {user.username}\r\n          </span>\r\n          <button onClick={() => setTheme(t => t === 'light' ? 'dark' : 'light')} style={{ background: 'none', border: 'none', color: 'var(--color-header)', fontSize: 22, cursor: 'pointer' }} title=\"Toggle dark mode\">{theme === 'dark' ? '🌙' : '☀️'}</button>\r\n        </div>\r\n        {/* Chat search input */}\r\n        <div style={{ padding: '8px 12px', background: 'var(--bg-sidebar)' }}>\r\n          <input\r\n            type=\"text\"\r\n            value={chatSearch}\r\n            onChange={e => setChatSearch(e.target.value)}\r\n            placeholder=\"Search users/groups...\"\r\n            style={{ width: '100%', borderRadius: 16, border: '1px solid var(--color-border)', padding: '6px 12px', fontSize: 14, background: 'var(--color-input)', color: 'var(--color-text)' }}\r\n          />\r\n        </div>\r\n        <div style={{ flex: 1, overflowY: 'auto', borderBottom: '1px solid var(--color-border)' }}>\r\n          <div style={{ padding: '8px 12px', fontWeight: 'bold', color: 'var(--color-link)' }}>Groups</div>\r\n          {filteredGroups.map(g => (\r\n            <div key={g.name} onClick={() => handleJoinGroup(g)} style={{ cursor: 'pointer', padding: 10, background: selectedGroup?.name === g.name ? '#e0f2f1' : 'transparent', display: 'flex', alignItems: 'center', gap: 10 }}>\r\n              {g.avatar ? (\r\n                <img src={g.avatar} alt=\"avatar\" style={{ width: 32, height: 32, borderRadius: '50%', objectFit: 'cover' }} />\r\n              ) : (\r\n                <span style={{ width: 32, height: 32, borderRadius: '50%', background: '#9C27B0', color: '#fff', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold', fontSize: 15 }}>{g.name[0].toUpperCase()}</span>\r\n              )}\r\n              <span>{g.name}</span>\r\n            </div>\r\n          ))}\r\n          <button onClick={() => setShowCreateGroup(true)} style={{ margin: '10px 12px', background: '#25D366', color: '#fff', border: 'none', borderRadius: 4, padding: '6px 0', fontWeight: 'bold', cursor: 'pointer' }}>+ Create Group</button>\r\n          <div style={{ padding: '8px 12px', fontWeight: 'bold', color: 'var(--color-link)', marginTop: 16 }}>Users</div>\r\n          {filteredUsers.map(u => (\r\n            <div key={u.username} onClick={() => { setSelectedUser(u); setSelectedGroup(null); }} style={{ cursor: 'pointer', padding: 10, background: selectedUser?.username === u.username ? '#e0f2f1' : 'transparent', display: 'flex', alignItems: 'center', gap: 10 }}>\r\n              {u.avatar ? (\r\n                <img src={u.avatar} alt=\"avatar\" style={{ width: 32, height: 32, borderRadius: '50%', objectFit: 'cover' }} />\r\n              ) : (\r\n                <span style={{ width: 32, height: 32, borderRadius: '50%', background: '#34B7F1', color: '#fff', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold', fontSize: 15 }}>{u.username[0].toUpperCase()}</span>\r\n              )}\r\n              <span>{u.username}</span>\r\n              {onlineUsers.includes(u.username) && (\r\n                <span style={{ width: 10, height: 10, background: '#25D366', borderRadius: '50%', display: 'inline-block', marginLeft: 6, border: '1.5px solid #fff' }} title=\"Online\"></span>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <button onClick={onLogout} style={{ margin: 16, background: '#fff', color: 'var(--color-link)', border: '1px solid var(--color-link)', borderRadius: 4, padding: '6px 0', fontWeight: 'bold', cursor: 'pointer' }}>Logout</button>\r\n      </div>\r\n      {/* Main Chat Area */}\r\n      <div style={{ flex: 1, display: 'flex', flexDirection: 'column' }}>\r\n        <div style={{ background: 'var(--bg-header)', color: 'var(--color-header)', padding: '1rem', borderTopRightRadius: 8, fontWeight: 'bold', fontSize: 20, minHeight: 60, display: 'flex', alignItems: 'center' }}>\r\n          {selectedGroup ? (\r\n            <>\r\n              {selectedGroup.avatar ? (\r\n                <img src={selectedGroup.avatar} alt=\"avatar\" style={{ width: 36, height: 36, borderRadius: '50%', objectFit: 'cover', border: '2px solid #fff', marginRight: 8 }} />\r\n              ) : (\r\n                <span style={{ width: 36, height: 36, borderRadius: '50%', background: '#9C27B0', color: '#fff', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold', fontSize: 16, marginRight: 8 }}>{selectedGroup.name[0].toUpperCase()}</span>\r\n              )}\r\n              {selectedGroup.name}\r\n            </>\r\n          ) : selectedUser ? (\r\n            <>\r\n              {selectedUser.avatar ? (\r\n                <img src={selectedUser.avatar} alt=\"avatar\" style={{ width: 36, height: 36, borderRadius: '50%', objectFit: 'cover', border: '2px solid #fff', marginRight: 8 }} />\r\n              ) : (\r\n                <span style={{ width: 36, height: 36, borderRadius: '50%', background: '#34B7F1', color: '#fff', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold', fontSize: 16, marginRight: 8 }}>{selectedUser.username[0].toUpperCase()}</span>\r\n              )}\r\n              {selectedUser.username}\r\n            </>\r\n          ) : 'Select a user or group to chat'}\r\n        </div>\r\n        {/* Message search input */}\r\n        {(selectedGroup || selectedUser) && (\r\n          <div style={{ padding: '8px 16px', background: 'var(--bg-chat)' }}>\r\n            <input\r\n              type=\"text\"\r\n              value={messageSearch}\r\n              onChange={e => setMessageSearch(e.target.value)}\r\n              placeholder=\"Search messages...\"\r\n              style={{ width: '100%', borderRadius: 16, border: '1px solid var(--color-border)', padding: '6px 12px', fontSize: 14, background: 'var(--color-input)', color: 'var(--color-text)' }}\r\n            />\r\n          </div>\r\n        )}\r\n        <div style={{ flex: 1, overflowY: 'auto', padding: 16, background: 'var(--bg-chat)' }}>\r\n          {(selectedGroup || selectedUser) ? (\r\n            <>\r\n              {filteredMessages.map((msg, idx) => (\r\n                <div key={msg._id || idx} style={{ display: 'flex', flexDirection: (msg.from === user.username) ? 'row-reverse' : 'row', alignItems: 'flex-end', marginBottom: 10 }}>\r\n                  {msg.avatar ? (\r\n                    <img src={msg.avatar} alt=\"avatar\" style={{ width: 36, height: 36, borderRadius: '50%', objectFit: 'cover', margin: '0 8px' }} />\r\n                  ) : (\r\n                    <div style={{ width: 36, height: 36, borderRadius: '50%', background: msg.color || '#25D366', color: '#fff', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold', fontSize: 16, margin: '0 8px' }}>\r\n                      {msg.from ? msg.from[0].toUpperCase() : '?'}\r\n                    </div>\r\n                  )}\r\n                  <div style={{ maxWidth: '70%', background: (msg.from === user.username) ? 'var(--bg-message-own)' : 'var(--bg-message-other)', borderRadius: 8, padding: '8px 12px', boxShadow: '0 1px 2px #0001', position: 'relative', color: 'var(--color-text)' }}>\r\n                    <div style={{ fontWeight: 'bold', fontSize: 13, color: 'var(--color-link)' }}>{msg.from || 'Unknown'}</div>\r\n                    {/* If this is a reply, show the parent message context */}\r\n                    {msg.replyTo && (\r\n                      <div style={{ fontSize: 12, color: 'var(--color-typing)', borderLeft: '2px solid #25D366', paddingLeft: 8, marginBottom: 4 }}>\r\n                        Replying to message\r\n                      </div>\r\n                    )}\r\n                    {msg.sticker ? (\r\n                      <img src={msg.sticker} alt=\"sticker\" style={{ maxWidth: 120, maxHeight: 120, borderRadius: 8, margin: '8px 0' }} />\r\n                    ) : (\r\n                      <div style={{ fontSize: 15 }}>{msg.text || msg}</div>\r\n                    )}\r\n                    {/* Reactions UI */}\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 4, marginTop: 4 }}>\r\n                      {['👍','😂','❤️','😮','😢','😡'].map(emoji => {\r\n                        const count = msg.reactions?.filter(r => r.emoji === emoji).length || 0;\r\n                        const reacted = msg.reactions?.some(r => r.emoji === emoji && r.user === user.username);\r\n                        return (\r\n                          <span\r\n                            key={emoji}\r\n                            style={{ cursor: 'pointer', fontSize: 18, background: reacted ? '#e0f2f1' : 'var(--color-input)', borderRadius: 6, padding: '2px 6px', border: reacted ? '1.5px solid #25D366' : '1.5px solid var(--color-border)' }}\r\n                            onClick={() => reacted ? unreactToMessage(msg._id, emoji) : reactToMessage(msg._id, emoji)}\r\n                            title={reacted ? 'Remove reaction' : 'React'}\r\n                          >\r\n                            {emoji} {count > 0 && count}\r\n                          </span>\r\n                        );\r\n                      })}\r\n                      {/* Reply button */}\r\n                      <button onClick={() => { setReplyTo(msg); }} style={{ marginLeft: 8, background: 'none', border: 'none', color: 'var(--color-link)', cursor: 'pointer', fontSize: 14 }}>↩️ Reply</button>\r\n                      {/* Show replies button */}\r\n                      <button onClick={() => fetchReplies(msg._id)} style={{ marginLeft: 4, background: 'none', border: 'none', color: 'var(--color-typing)', cursor: 'pointer', fontSize: 14 }}>💬 {replies[msg._id]?.length || 0}</button>\r\n                    </div>\r\n                    {/* Show replies under the message */}\r\n                    {replies[msg._id] && replies[msg._id].length > 0 && (\r\n                      <div style={{ marginTop: 6, paddingLeft: 12, borderLeft: '2px solid var(--color-border)' }}>\r\n                        {replies[msg._id].map((r, i) => (\r\n                          <div key={r._id || i} style={{ fontSize: 14, marginBottom: 2 }}>\r\n                            <span style={{ color: 'var(--color-link)', fontWeight: 'bold' }}>{r.from}:</span> {r.text}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                    <div style={{ fontSize: 11, color: 'var(--color-typing)', textAlign: 'right', marginTop: 2, display: 'flex', alignItems: 'center', gap: 4 }}>\r\n                      {msg.time || ''}\r\n                      {/* Read receipt indicator */}\r\n                      {msg.from === user.username && (selectedUser || selectedGroup) && (\r\n                        selectedUser ? (\r\n                          msg.readBy?.includes(selectedUser.username) ? (\r\n                            <span title=\"Read\" style={{ color: '#25D366', fontSize: 16, marginLeft: 4 }}>✓</span>\r\n                          ) : (\r\n                            <span title=\"Delivered\" style={{ color: 'var(--color-typing)', fontSize: 16, marginLeft: 4 }}>✓</span>\r\n                          )\r\n                        ) : selectedGroup ? (\r\n                          msg.readBy && selectedGroup.members && msg.readBy.length === selectedGroup.members.length ? (\r\n                            <span title=\"Read by all\" style={{ color: '#25D366', fontSize: 16, marginLeft: 4 }}>✓✓</span>\r\n                          ) : (\r\n                            <span title=\"Delivered to group\" style={{ color: 'var(--color-typing)', fontSize: 16, marginLeft: 4 }}>✓</span>\r\n                          )\r\n                        ) : null\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              {/* Typing indicator */}\r\n              {typingUsers.length > 0 && (\r\n                <div style={{ color: 'var(--color-typing)', fontStyle: 'italic', margin: '8px 0 0 8px' }}>\r\n                  {typingUsers.length === 1\r\n                    ? `${typingUsers[0]} is typing...`\r\n                    : `${typingUsers.join(', ')} are typing...`}\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div style={{ color: 'var(--color-typing)', textAlign: 'center', marginTop: 40 }}>Select a user or group to start chatting</div>\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        {(selectedUser || selectedGroup) && (\r\n          <form onSubmit={sendMessage} style={{ display: 'flex', padding: 12, background: 'var(--color-input)', borderBottomRightRadius: 8, alignItems: 'center', position: 'relative' }}>\r\n            <button type=\"button\" onClick={() => setShowEmoji(e => !e)} style={{ background: 'none', border: 'none', fontSize: 22, marginRight: 6, cursor: 'pointer', color: 'var(--color-link)' }} title=\"Emoji\">😊</button>\r\n            <button type=\"button\" onClick={() => setShowStickers(e => !e)} style={{ background: 'none', border: 'none', fontSize: 22, marginRight: 6, cursor: 'pointer', color: 'var(--color-link)' }} title=\"Stickers/GIFs\">🖼️</button>\r\n            <input\r\n              type=\"text\"\r\n              value={message}\r\n              onChange={handleInputChange}\r\n              placeholder={selectedGroup ? `Message #${selectedGroup.name}` : `Message @${selectedUser.username}`}\r\n              style={{ flex: 1, borderRadius: 20, border: '1px solid var(--color-border)', padding: '10px 16px', marginRight: 8, background: 'var(--color-input)', color: 'var(--color-text)' }}\r\n            />\r\n            <button type=\"submit\" style={{ background: '#25D366', color: '#fff', border: 'none', borderRadius: 20, padding: '0 20px', fontWeight: 'bold', fontSize: 16 }}>Send</button>\r\n            {showEmoji && (\r\n              <div style={{ position: 'absolute', bottom: 60, left: 0, zIndex: 10 }}>\r\n                <Picker data={data} onEmojiSelect={addEmoji} theme={theme} />\r\n              </div>\r\n            )}\r\n            {showStickers && (\r\n              <div style={{ position: 'absolute', bottom: 60, left: 50, zIndex: 10, background: 'var(--bg-main)', borderRadius: 8, boxShadow: '0 2px 8px #0002', padding: 8, display: 'flex', gap: 8 }}>\r\n                {STICKERS.map(url => (\r\n                  <img key={url} src={url} alt=\"sticker\" style={{ width: 48, height: 48, borderRadius: 6, cursor: 'pointer' }} onClick={() => addSticker(url)} />\r\n                ))}\r\n              </div>\r\n            )}\r\n          </form>\r\n        )}\r\n        {/* Reply input UI */}\r\n        {replyTo && (\r\n          <form onSubmit={sendReply} style={{ display: 'flex', alignItems: 'center', background: 'var(--color-input)', borderTop: '1px solid var(--color-border)', padding: 8, position: 'relative' }}>\r\n            <span style={{ marginRight: 8, color: 'var(--color-link)', fontWeight: 'bold' }}>Replying to {replyTo.from}:</span>\r\n            <input\r\n              type=\"text\"\r\n              value={message}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Type your reply...\"\r\n              style={{ flex: 1, borderRadius: 20, border: '1px solid var(--color-border)', padding: '8px 14px', marginRight: 8, background: 'var(--color-input)', color: 'var(--color-text)' }}\r\n            />\r\n            <button type=\"submit\" style={{ background: '#25D366', color: '#fff', border: 'none', borderRadius: 20, padding: '0 16px', fontWeight: 'bold', fontSize: 15 }}>Send</button>\r\n            <button type=\"button\" onClick={() => setReplyTo(null)} style={{ background: 'none', border: 'none', color: 'var(--color-typing)', fontSize: 18, marginLeft: 6, cursor: 'pointer' }}>✖</button>\r\n          </form>\r\n        )}\r\n        {showCreateGroup && (\r\n          <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: '#0008', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000 }}>\r\n            <form onSubmit={handleCreateGroup} style={{ background: 'var(--bg-main)', padding: 32, borderRadius: 8, minWidth: 320, display: 'flex', flexDirection: 'column', gap: 16 }}>\r\n              <h3 style={{ margin: 0, color: 'var(--color-link)' }}>Create Group</h3>\r\n              <input\r\n                type=\"text\"\r\n                value={newGroup.name}\r\n                onChange={e => setNewGroup(g => ({ ...g, name: e.target.value }))}\r\n                placeholder=\"Group name\"\r\n                required\r\n                style={{ padding: 10, borderRadius: 4, border: '1px solid var(--color-border)' }}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                value={newGroup.avatar}\r\n                onChange={e => setNewGroup(g => ({ ...g, avatar: e.target.value }))}\r\n                placeholder=\"Avatar URL (optional)\"\r\n                style={{ padding: 10, borderRadius: 4, border: '1px solid var(--color-border)' }}\r\n              />\r\n              <div style={{ display: 'flex', gap: 8 }}>\r\n                <button type=\"submit\" style={{ background: '#25D366', color: '#fff', border: 'none', borderRadius: 4, padding: 10, fontWeight: 'bold', flex: 1 }}>Create</button>\r\n                <button type=\"button\" onClick={() => setShowCreateGroup(false)} style={{ background: 'var(--color-input)', color: 'var(--color-text)', border: 'none', borderRadius: 4, padding: 10, fontWeight: 'bold', flex: 1 }}>Cancel</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}